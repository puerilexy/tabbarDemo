{"version":3,"file":"index.esm.js","sources":["../src/utils/store.js","../src/utils/index.js","../src/connect/connect.js","../src/connect/Provider.js","../src/hooks/context.js","../src/hooks/use-redux-context.js","../src/hooks/use-store.js","../src/hooks/use-dispatch.js","../src/utils/batch.js","../src/utils/subscription.js","../src/utils/invariant.js","../src/hooks/use-selector.js","../src/index.js"],"sourcesContent":["let store = null\nconst appGlobal = global || {}\nconst globalRef = Object.getPrototypeOf(appGlobal) || appGlobal\nexport function getStore () {\n  if (process.env.TARO_ENV === 'quickapp') {\n    return globalRef.store || null\n  } else if (process.env.TARO_ENV === 'alipay') {\n    return my.taroReduxStore || null\n  }\n  return store\n}\n\nexport function setStore (arg) {\n  if (process.env.TARO_ENV === 'quickapp') {\n    globalRef.store = arg\n  } else if (process.env.TARO_ENV === 'alipay') {\n    my.taroReduxStore = arg\n  } else {\n    store = arg\n  }\n}\n","export function isObject (arg) {\n  return arg != null && typeof arg === 'object' && !Array.isArray(arg)\n}\n\nexport function mergeObjects (obj1, obj2) {\n  const result = Object.assign({}, obj1)\n  if (isObject(obj1) && isObject(obj2)) {\n    for (const p in obj2) {\n      if (isObject(obj1[p]) && isObject(obj2[p])) {\n        result[p] = mergeObjects(obj1[p], obj2[p])\n      } else {\n        result[p] = obj2[p]\n      }\n    }\n  }\n  return result\n}\n","import { getStore } from '../utils/store'\nimport { mergeObjects, isObject } from '../utils'\n\nfunction wrapPropsWithDispatch (mapDispatchToProps, dispatch) {\n  if (typeof mapDispatchToProps === 'function') {\n    return mapDispatchToProps(dispatch)\n  }\n\n  if (isObject(mapDispatchToProps)) {\n    return Object.keys(mapDispatchToProps)\n      .reduce((props, key) => {\n        const actionCreator = mapDispatchToProps[key]\n        if (typeof actionCreator === 'function') {\n          props[key] = (...args) => dispatch(actionCreator(...args))\n        }\n        return props\n      }, {})\n  }\n\n  return {}\n}\n\nexport default function connect (mapStateToProps, mapDispatchToProps) {\n  const store = getStore()\n  const dispatch = store.dispatch\n  const initMapDispatch = wrapPropsWithDispatch(mapDispatchToProps, dispatch)\n  initMapDispatch.dispatch = dispatch\n\n  const stateListener = function () {\n    let isChanged = false\n    const newMapState = mapStateToProps(store.getState(), this.props)\n    const prevProps = Object.assign({}, this.props)\n    Object.keys(newMapState).forEach(key => {\n      let val = newMapState[key]\n      if (isObject(val) && isObject(initMapDispatch[key])) {\n        val = mergeObjects(val, initMapDispatch[key])\n      }\n      if (this.props[key] !== val) {\n        this.props[key] = val\n        isChanged = true\n      }\n    })\n    if (isChanged) {\n      this.prevProps = prevProps\n      this._unsafeCallUpdate = true\n      this.setState({}, () => {\n        delete this._unsafeCallUpdate\n      })\n    }\n  }\n\n  return function connectComponent (Component) {\n    // 将从redux而来的props从配置中剔除\n    const mapState = mapStateToProps(store.getState(), Component.defaultProps || {})\n    Component.properties && mapState && Object.keys(mapState).forEach(function (key) {\n      delete Component.properties[key]\n    })\n\n    let unSubscribe = null\n\n    return class Connect extends Component {\n      constructor (props, isPage) {\n        super(Object.assign(...arguments, mergeObjects(mapStateToProps(store.getState(), props), initMapDispatch)), isPage)\n        Object.keys(initMapDispatch).forEach(key => {\n          this[`__event_${key}`] = initMapDispatch[key]\n        })\n      }\n\n      _constructor () {\n        if (!this.$scope) {\n          if (super._constructor) {\n            super._constructor(this.props)\n          }\n          return\n        }\n        const store = getStore()\n        Object.assign(this.props, mergeObjects(mapStateToProps(store.getState(), this.props), initMapDispatch))\n        unSubscribe = store.subscribe(stateListener.bind(this))\n        if (super._constructor) {\n          super._constructor(this.props)\n        }\n      }\n\n      componentWillUnmount () {\n        if (super.componentWillUnmount) {\n          super.componentWillUnmount()\n        }\n        if (unSubscribe) {\n          unSubscribe()\n        }\n        unSubscribe = null\n      }\n    }\n  }\n}\n","export default class Provider {}\n","import Taro from '@tarojs/taro'\n\nexport const ReduxContext = Taro.createContext(null)\n","import { useContext } from '@tarojs/taro'\nimport { ReduxContext } from './context'\n\n/**\n * A hook to access the value of the `ReactReduxContext`. This is a low-level\n * hook that you should usually not need to call directly.\n *\n * @returns {any} the value of the `ReactReduxContext`\n *\n * @example\n *\n * import React from 'react'\n * import { useReduxContext } from 'react-redux'\n *\n * export const CounterComponent = ({ value }) => {\n *   const { store } = useReduxContext()\n *   return <div>{store.getState()}</div>\n * }\n */\nexport function useReduxContext () {\n  const contextValue = useContext(ReduxContext)\n\n  return contextValue\n}\n","import { useReduxContext } from './use-redux-context'\n\n/**\n * A hook to access the redux store.\n *\n * @returns {any} the redux store\n *\n * @example\n *\n * import React from 'react'\n * import { useStore } from 'react-redux'\n *\n * export const ExampleComponent = () => {\n *   const store = useStore()\n *   return <div>{store.getState()}</div>\n * }\n */\nexport function useStore () {\n  const { store } = useReduxContext()\n  return store\n}\n","import { useStore } from './use-store'\n\n/**\n * A hook to access the redux `dispatch` function. Note that in most cases where you\n * might want to use this hook it is recommended to use `useActions` instead to bind\n * action creators to the `dispatch` function.\n *\n * @returns {any|function} redux store's `dispatch` function\n *\n * @example\n *\n * import React, { useCallback } from 'react'\n * import { useReduxDispatch } from 'react-redux'\n *\n * export const CounterComponent = ({ value }) => {\n *   const dispatch = useDispatch()\n *   const increaseCounter = useCallback(() => dispatch({ type: 'increase-counter' }), [])\n *   return (\n *     <div>\n *       <span>{value}</span>\n *       <button onClick={increaseCounter}>Increase counter</button>\n *     </div>\n *   )\n * }\n */\nexport function useDispatch () {\n  const store = useStore()\n  return store.dispatch\n}\n","// Default to a dummy \"batch\" implementation that just runs the callback\nfunction defaultNoopBatch (callback) {\n  callback()\n}\n\nlet batch = defaultNoopBatch\n\n// Allow injecting another batching function later\nexport const setBatch = newBatch => (batch = newBatch)\n\n// Supply a getter just to skip dealing with ESM bindings\nexport const getBatch = () => batch\n","import { getBatch } from './batch'\n\n// encapsulates the subscription logic for connecting a component to the redux store, as\n// well as nesting subscriptions of descendant components, so that we can ensure the\n// ancestor components re-render before descendants\n\nconst CLEARED = null\nconst nullListeners = { notify () {} }\n\nfunction createListenerCollection () {\n  const batch = getBatch()\n  // the current/next pattern is copied from redux's createStore code.\n  // TODO: refactor+expose that code to be reusable here?\n  let current = []\n  let next = []\n\n  return {\n    clear () {\n      next = CLEARED\n      current = CLEARED\n    },\n\n    notify () {\n      const listeners = (current = next)\n      batch(() => {\n        for (let i = 0; i < listeners.length; i++) {\n          listeners[i]()\n        }\n      })\n    },\n\n    get () {\n      return next\n    },\n\n    subscribe (listener) {\n      let isSubscribed = true\n      if (next === current) next = current.slice()\n      next.push(listener)\n\n      return function unsubscribe () {\n        if (!isSubscribed || current === CLEARED) return\n        isSubscribed = false\n\n        if (next === current) next = current.slice()\n        next.splice(next.indexOf(listener), 1)\n      }\n    }\n  }\n}\n\nexport default class Subscription {\n  constructor (store, parentSub) {\n    this.store = store\n    this.parentSub = parentSub\n    this.unsubscribe = null\n    this.listeners = nullListeners\n\n    this.handleChangeWrapper = this.handleChangeWrapper.bind(this)\n  }\n\n  addNestedSub (listener) {\n    this.trySubscribe()\n    return this.listeners.subscribe(listener)\n  }\n\n  notifyNestedSubs () {\n    this.listeners.notify()\n  }\n\n  handleChangeWrapper () {\n    if (this.onStateChange) {\n      this.onStateChange()\n    }\n  }\n\n  isSubscribed () {\n    return Boolean(this.unsubscribe)\n  }\n\n  trySubscribe () {\n    if (!this.unsubscribe) {\n      this.unsubscribe = this.parentSub\n        ? this.parentSub.addNestedSub(this.handleChangeWrapper)\n        : this.store.subscribe(this.handleChangeWrapper)\n\n      this.listeners = createListenerCollection()\n    }\n  }\n\n  tryUnsubscribe () {\n    if (this.unsubscribe) {\n      this.unsubscribe()\n      this.unsubscribe = null\n      this.listeners.clear()\n      this.listeners = nullListeners\n    }\n  }\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict'\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nexport default function invariant (condition, format, a, b, c, d, e, f) {\n  if (!condition) {\n    var error\n    if (format === undefined) {\n      error = new Error(\n        'Minified exception occurred; use the non-minified dev environment ' +\n          'for the full error message and additional helpful warnings.'\n      )\n    } else {\n      var args = [a, b, c, d, e, f]\n      var argIndex = 0\n      error = new Error(\n        format.replace(/%s/g, function () {\n          return args[argIndex++]\n        })\n      )\n      error.name = 'Invariant Violation'\n    }\n\n    error.framesToPop = 1 // we don't care about invariant's own frame\n    throw error\n  }\n}\n","import { useReducer, useRef, useMemo, useEffect } from '@tarojs/taro'\nimport { useReduxContext } from './use-redux-context'\nimport Subscription from '../utils/subscription'\nimport invariant from '../utils/invariant'\n\nconst refEquality = (a, b) => a === b\n\n/**\n * A hook to access the redux store's state. This hook takes a selector function\n * as an argument. The selector is called with the store state.\n *\n * This hook takes an optional equality comparison function as the second parameter\n * that allows you to customize the way the selected state is compared to determine\n * whether the component needs to be re-rendered.\n *\n * @param {Function} selector the selector function\n * @param {Function=} equalityFn the function that will be used to determine equality\n *\n * @returns {any} the selected state\n *\n * @example\n *\n * import React from 'react'\n * import { useSelector } from 'react-redux'\n *\n * export const CounterComponent = () => {\n *   const counter = useSelector(state => state.counter)\n *   return <div>{counter}</div>\n * }\n */\nexport function useSelector (selector, equalityFn = refEquality) {\n  invariant(selector, `You must pass a selector to useSelectors`)\n\n  const { store, subscription: contextSub } = useReduxContext()\n  const [, forceRender] = useReducer(s => s + 1, 0)\n\n  const subscription = useMemo(() => new Subscription(store, contextSub), [\n    store,\n    contextSub\n  ])\n\n  const latestSubscriptionCallbackError = useRef()\n  const latestSelector = useRef()\n  const latestSelectedState = useRef()\n\n  let selectedState\n\n  try {\n    if (\n      selector !== latestSelector.current ||\n      latestSubscriptionCallbackError.current\n    ) {\n      selectedState = selector(store.getState())\n    } else {\n      selectedState = latestSelectedState.current\n    }\n  } catch (err) {\n    let errorMessage = `An error occured while selecting the store state: ${\n      err.message\n    }.`\n\n    if (latestSubscriptionCallbackError.current) {\n      errorMessage += `\\nThe error may be correlated with this previous error:\\n${\n        latestSubscriptionCallbackError.current.stack\n      }\\n\\nOriginal stack trace:`\n    }\n\n    throw new Error(errorMessage)\n  }\n\n  useEffect(() => {\n    latestSelector.current = selector\n    latestSelectedState.current = selectedState\n    latestSubscriptionCallbackError.current = undefined\n  })\n\n  useEffect(\n    () => {\n      function checkForUpdates () {\n        try {\n          const newSelectedState = latestSelector.current(store.getState())\n\n          if (equalityFn(newSelectedState, latestSelectedState.current)) {\n            return\n          }\n\n          latestSelectedState.current = newSelectedState\n        } catch (err) {\n          // we ignore all errors here, since when the component\n          // is re-rendered, the selectors are called again, and\n          // will throw again, if neither props nor store state\n          // changed\n          latestSubscriptionCallbackError.current = err\n        }\n\n        forceRender({})\n      }\n\n      subscription.onStateChange = checkForUpdates\n      subscription.trySubscribe()\n\n      checkForUpdates()\n\n      return () => subscription.tryUnsubscribe()\n    },\n    [store, subscription]\n  )\n\n  return selectedState\n}\n","import { getStore, setStore } from './utils/store'\nimport connect from './connect/connect'\nimport Provider from './connect/Provider'\nimport { useDispatch } from './hooks/use-dispatch'\nimport { useSelector } from './hooks/use-selector'\nimport { useStore } from './hooks/use-store'\nimport { ReduxContext } from './hooks/context'\n\nexport default {\n  connect,\n  Provider,\n  getStore,\n  setStore,\n  useDispatch,\n  useSelector,\n  useStore,\n  ReduxContext\n}\n\nexport {\n  connect,\n  Provider,\n  getStore,\n  setStore,\n  useDispatch,\n  useSelector,\n  useStore,\n  ReduxContext\n}\n"],"names":["store","appGlobal","global","globalRef","Object","getPrototypeOf","getStore","process","env","TARO_ENV","my","taroReduxStore","setStore","arg","isObject","Array","isArray","mergeObjects","obj1","obj2","result","assign","p","wrapPropsWithDispatch","mapDispatchToProps","dispatch","keys","reduce","props","key","actionCreator","connect","mapStateToProps","initMapDispatch","stateListener","isChanged","newMapState","getState","prevProps","forEach","val","_unsafeCallUpdate","setState","connectComponent","Component","mapState","defaultProps","properties","unSubscribe","isPage","arguments","$scope","subscribe","bind","Provider","ReduxContext","Taro","createContext","useReduxContext","contextValue","useContext","useStore","useDispatch","defaultNoopBatch","callback","batch","getBatch","CLEARED","nullListeners","notify","createListenerCollection","current","next","clear","listeners","i","length","get","listener","isSubscribed","slice","push","unsubscribe","splice","indexOf","Subscription","parentSub","handleChangeWrapper","trySubscribe","onStateChange","Boolean","addNestedSub","invariant","condition","format","a","b","c","d","e","f","error","undefined","Error","args","argIndex","replace","name","framesToPop","refEquality","useSelector","selector","equalityFn","contextSub","subscription","useReducer","s","forceRender","useMemo","latestSubscriptionCallbackError","useRef","latestSelector","latestSelectedState","selectedState","err","errorMessage","message","stack","useEffect","checkForUpdates","newSelectedState","tryUnsubscribe"],"mappings":"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"}